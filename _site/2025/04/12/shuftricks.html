<html>

<head>
    <title>Using shuf to select random ports in a cluster</title>
    <meta charset='UTF-8'>
    <meta content='width=device-width, initial-scale=1' name='viewport' />

    <meta name='description' content=''>
    <meta name='keywords' content='hacks, bash'>
    <meta name='author' content='Kilaru Yasaswi Sri Chandra Gandhi'>

    <link rel='shortcut icon' href='/assets/images/alexandrosMegas.jpg'>
    <link href='/index.css' rel='stylesheet'>

    <script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>

<body>
    <div id="dappled-light">

    <div id="glow"></div>
    <div id="glow-bounce"></div>
    <div class="perspective">
        <div id="leaves">
            <svg style="width: 0; height: 0; position: absolute;">
                <defs>
                    <filter id="wind" x="-20%" y="-20%" width="140%" height="140%">
                        <feTurbulence type="fractalNoise" numOctaves="2" seed="1">
                            <animate attributeName="baseFrequency" dur="16s" keyTimes="0;0.33;0.66;1"
                                values="0.005 0.003;0.01 0.009;0.008 0.004;0.005 0.003" repeatCount="indefinite" />
                        </feTurbulence>
                        <feDisplacementMap in="SourceGraphic">
                            <animate attributeName="scale" dur="20s" keyTimes="0;0.25;0.5;0.75;1"
                                values="45;55;75;55;45" repeatCount="indefinite" />
                        </feDisplacementMap>
                    </filter>
                </defs>
            </svg>
        </div>
        <div id="blinds">
            <div class="shutters">
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
                <div class="shutter"></div>
            </div>
            <div class="vertical">
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
        </div>
    </div>
    <div id="progressive-blur">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
</div>
    <article id="writing">
        <p id="nav">
            <a href='/'>Home</a> ~
            <a href='/writing'>Writing</a> ~
            <a href='/reading'>Reading</a>
        </p>
        <hr>
        <div class='content'>
            <div class='front-matter'>
                <div class='wrap'>
                    <h1>Using shuf to select random ports in a cluster</h1>
                    <p><i>A few tricks in bash to generate random numbers</i></p>
                    <div class='bylines'>
                        <div class='byline'>
                            <h3>Published</h3>
                            <p>12 April 2025</p>
                        </div>
                    </div>
                    <div class='clear'></div>
                </div>
            </div>
            <hr>
            <div class='wrap-article'>
                <p>I found this Stack OverFlow answer about <a href="https://stackoverflow.com/a/2556282">generating random numbers with a bash command</a> and I’ve been using it to randomly select ports in a cluster.</p>

<p>It uses the <a href="https://man7.org/linux/man-pages/man1/shuf.1.html"><code class="language-plaintext highlighter-rouge">shuf</code></a> command (typing <code class="language-plaintext highlighter-rouge">man shuf</code> opens the manual on linux)</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
curl http://127.0.0.1:<span class="si">$(</span><span class="nb">shuf</span> <span class="nt">-i</span> 4000-4007 <span class="nt">-n1</span><span class="si">)</span>
</code></pre></div></div>

<p>I was reading the man pages and I found that you can do so much more with this simple command, a few cool examples are:</p>

<ul>
  <li>Randomize lines in a file (this is useful if I have a list of file names of training data and I want to do a quick <code class="language-plaintext highlighter-rouge">train_test_split</code>)</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">shuf </span>files.txt
</code></pre></div></div>

<ul>
  <li>Pick seven random numbers out of an input range</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">seq </span>1 10010 | <span class="nb">shuf</span> <span class="nt">-n</span> 7
</code></pre></div></div>

<ul>
  <li>And finally, the last one doesn’t really need <code class="language-plaintext highlighter-rouge">shuf</code> but I found it while I was exploring, so I’m just putting it here. This one is the coolest, you can generate random passwords by taking random bytes from <code class="language-plaintext highlighter-rouge">/dev/urandom</code>, filter for alphanumeric characters, and choose how many ever characters you want. I am definitely using this the next time my institute bugs me about changing my email passwords.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">head</span> /dev/urandom | <span class="nb">tr</span> <span class="nt">-dc</span> A-Za-z0-9 | <span class="nb">head</span> <span class="nt">-c</span> 9 | <span class="nb">shuf</span> <span class="nt">-n</span> 1
</code></pre></div></div>

<hr />



                <script src="https://utteranc.es/client.js" repo="kyscg/kyscg.github.io" issue-term="url"
                    label="comments" theme="github-light" crossorigin="anonymous" async></script>
            </div>
        </div>
    </article>
</body>

</html>
